<!DOCTYPE html>
<html>
<head>
    <title>MSG91 SMS Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        .form-group { margin: 15px 0; }
        input, button { padding: 10px; width: 100%; box-sizing: border-box; }
        button { background: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background: #45a049; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #4CAF50; }
        .error { border-left-color: #f44336; }
        .success { border-left-color: #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± MSG91 SMS Test</h1>
        
        <div class="form-group">
            <label>Phone Number (10 digits):</label>
            <input type="text" id="phoneInput" placeholder="9876543210" maxlength="10">
        </div>
        
        <div class="form-group">
            <button onclick="testSendOTP()">üì§ Send Test OTP</button>
        </div>
        
        <div class="form-group">
            <label>Enter OTP (6 digits):</label>
            <input type="text" id="otpInput" placeholder="123456" maxlength="6">
        </div>
        
        <div class="form-group">
            <button onclick="testVerifyOTP()">‚úÖ Verify OTP</button>
        </div>
        
        <div class="form-group">
            <button onclick="checkBalance()">üí∞ Check SMS Balance</button>
        </div>
        
        <div id="logs"></div>
    </div>

    <script src="msg91-config.js"></script>
    
    <script>
        function log(message, isError = false) {
            const div = document.createElement('div');
            div.className = `log ${isError ? 'error' : 'success'}`;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            document.getElementById('logs').appendChild(div);
            console.log(message);
        }

        async function testSendOTP() {
            const phone = document.getElementById('phoneInput').value;
            
            if (!phone || phone.length !== 10) {
                log('‚ùå Please enter a valid 10-digit phone number', true);
                return;
            }
            
            try {
                log('üì§ Sending OTP to +91' + phone + '...');
                const result = await sendOTPViaMSG91(phone);
                log('‚úÖ ' + result.message);
            } catch (error) {
                log('‚ùå Error: ' + error.message, true);
            }
        }

        async function testVerifyOTP() {
            const phone = document.getElementById('phoneInput').value;
            const otp = document.getElementById('otpInput').value;
            
            if (!phone || !otp) {
                log('‚ùå Please enter both phone number and OTP', true);
                return;
            }
            
            try {
                log('üîç Verifying OTP...');
                const result = await verifyOTPViaMSG91(phone, otp);
                if (result.verified) {
                    log('‚úÖ ' + result.message);
                } else {
                    log('‚ùå ' + result.message, true);
                }
            } catch (error) {
                log('‚ùå Error: ' + error.message, true);
            }
        }

        async function checkBalance() {
            try {
                log('üí∞ Checking MSG91 balance...');
                const balance = await getMSG91Balance();
                log('üí∞ SMS Balance: ' + balance + ' credits');
            } catch (error) {
                log('‚ùå Error checking balance: ' + error.message, true);
            }
        }

        // Initialize
        log('üöÄ MSG91 Test Page Ready');
        log('‚ö†Ô∏è Make sure to update your credentials in msg91-config.js first!');
    </script>
</body>
</html>