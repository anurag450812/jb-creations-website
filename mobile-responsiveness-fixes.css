/*
 * MOBILE RESPONSIVENESS FIXES FOR JB CREATIONS WEBSITE
 * Comprehensive mobile optimization and spacing improvements
 */

/* ===== CRITICAL MOBILE FIXES ===== */

/* 1. PREVENT HORIZONTAL SCROLL ON MOBILE */
html, body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    box-sizing: border-box;
}

*, *::before, *::after {
    box-sizing: border-box;
}

/* 2. FIX MOBILE VIEWPORT ISSUES */
@media (max-width: 768px) {
    .container {
        width: 100% !important;
        max-width: calc(100vw - 1rem) !important;
        margin: 0 auto !important;
        padding: 0.5rem !important;
        overflow-x: hidden !important;
    }
    
    /* Fix header on mobile */
    .site-header {
        position: relative !important;
        top: auto !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .header-content {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0 1rem !important;
        overflow: hidden !important;
    }
    
    /* Fix brand text overflow */
    .brand-name {
        font-size: clamp(1.2rem, 4vw, 1.4rem) !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    .brand-quote {
        font-size: clamp(0.6rem, 2.5vw, 0.7rem) !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
}

/* 3. MOBILE SECTION SPACING FIXES */
@media (max-width: 768px) {
    .upload-section,
    .preview-section,
    .room-preview-section,
    .mobile-customization-section {
        width: 100% !important;
        max-width: calc(100vw - 1rem) !important;
        margin: 0.5rem auto !important;
        padding: 1rem !important;
        box-sizing: border-box !important;
    }
    
    /* Fix frame container dimensions */
    .frame {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
        min-height: 280px !important;
        box-sizing: border-box !important;
    }
    
    .image-container {
        width: 100% !important;
        max-width: 100% !important;
        min-height: 280px !important;
        box-sizing: border-box !important;
    }
}

/* 4. FIX MOBILE BOTTOM BAR SPACING */
@media (max-width: 600px) {
    .mobile-bottom-bar {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        z-index: 5000 !important;
        padding: 8px 10px calc(12px + env(safe-area-inset-bottom, 0px)) !important;
        box-sizing: border-box !important;
    }
    
    .mobile-dropup {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        z-index: 6000 !important;
        box-sizing: border-box !important;
    }
    
    /* Add bottom padding to main content to avoid overlap */
    .customize-page .container {
        padding-bottom: calc(80px + env(safe-area-inset-bottom, 0px)) !important;
    }
}

/* 5. RESPONSIVE GRID IMPROVEMENTS */
@media (max-width: 768px) {
    .mobile-size-grid {
        grid-template-columns: 1fr 1fr !important;
        gap: 0.5rem !important;
        width: 100% !important;
    }
    
    .mobile-color-grid,
    .mobile-texture-grid {
        display: flex !important;
        justify-content: space-around !important;
        gap: 0.5rem !important;
        width: 100% !important;
    }
    
    .mobile-adjustments-container {
        width: 100% !important;
        padding: 0 0.5rem !important;
    }
}

/* 6. TOUCH TARGET IMPROVEMENTS */
@media (max-width: 768px) {
    /* Ensure all interactive elements meet 44px minimum touch target */
    .zoom-controls button,
    .mobile-zoom-btn,
    .bar-tab,
    .mobile-size-btn,
    .mobile-color-btn,
    .mobile-texture-btn {
        min-width: 44px !important;
        min-height: 44px !important;
        touch-action: manipulation !important;
        -webkit-tap-highlight-color: transparent !important;
    }
    
    /* Improve button spacing */
    .zoom-controls {
        gap: 0.75rem !important;
        padding: 1rem !important;
    }
    
    .mobile-controls {
        gap: 0.75rem !important;
        padding: 1rem 0 !important;
    }
}

/* 7. TYPOGRAPHY RESPONSIVENESS */
@media (max-width: 768px) {
    /* Scale text sizes appropriately */
    h1 { font-size: clamp(1.5rem, 5vw, 2rem) !important; }
    h2 { font-size: clamp(1.2rem, 4vw, 1.5rem) !important; }
    h3 { font-size: clamp(1rem, 3.5vw, 1.25rem) !important; }
    
    p, span, div {
        font-size: clamp(0.875rem, 3vw, 1rem) !important;
    }
    
    /* Button text */
    button {
        font-size: clamp(0.8rem, 3vw, 0.9rem) !important;
    }
}

/* 8. LANDSCAPE MOBILE FIXES */
@media (max-width: 768px) and (orientation: landscape) {
    .upload-section,
    .preview-section {
        padding: 0.75rem !important;
    }
    
    .frame {
        min-height: 200px !important;
    }
    
    .mobile-bottom-bar {
        padding: 6px 8px calc(8px + env(safe-area-inset-bottom, 0px)) !important;
    }
}

/* 9. VERY SMALL DEVICES (< 400px) */
@media (max-width: 399px) {
    .container {
        padding: 0.25rem !important;
    }
    
    .upload-section,
    .preview-section,
    .room-preview-section,
    .mobile-customization-section {
        padding: 0.75rem !important;
        margin: 0.25rem auto !important;
    }
    
    .brand-name {
        font-size: 1.1rem !important;
        letter-spacing: 0.8px !important;
    }
    
    .brand-quote {
        font-size: 0.55rem !important;
    }
    
    /* Smaller buttons on very small screens */
    .zoom-controls button {
        width: 36px !important;
        height: 36px !important;
        font-size: 0.8rem !important;
    }
}

/* 10. PERFORMANCE OPTIMIZATIONS FOR MOBILE */
@media (max-width: 768px) {
    /* Disable expensive effects on mobile */
    .rain-glass,
    .raindrop,
    .water-droplet {
        display: none !important;
    }
    
    /* Simplify animations */
    * {
        animation-duration: 0.2s !important;
        transition-duration: 0.2s !important;
    }
    
    /* Reduce backdrop-filter usage */
    .cards-container,
    .total-price-bar,
    .site-header,
    .mobile-bottom-bar,
    .mobile-dropup {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
}

/* 11. SAFE AREA SUPPORT FOR NOTCHED DEVICES */
@supports (padding: max(0px)) {
    .mobile-bottom-bar {
        padding-left: max(10px, env(safe-area-inset-left)) !important;
        padding-right: max(10px, env(safe-area-inset-right)) !important;
        padding-bottom: max(12px, env(safe-area-inset-bottom)) !important;
    }
    
    .mobile-dropup {
        padding-left: max(0px, env(safe-area-inset-left)) !important;
        padding-right: max(0px, env(safe-area-inset-right)) !important;
    }
    
    .site-header {
        padding-top: max(12px, env(safe-area-inset-top)) !important;
    }
}

/* 12. FIX MOBILE IMAGE GALLERY SPACING */
@media (max-width: 768px) {
    .room-preview-container {
        width: 100% !important;
        max-width: calc(100vw - 2rem) !important;
        margin: 0.5rem auto !important;
        aspect-ratio: 1/1 !important;
    }
    
    .room-preview-image {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        border-radius: 12px !important;
    }
}

/* 13. MOBILE CART AND PRICING FIXES */
@media (max-width: 768px) {
    .mobile-room-add {
        margin: 12px 8px calc(80px + 12px + env(safe-area-inset-bottom, 0px)) 8px !important;
        padding: 12px 14px !important;
        width: calc(100% - 16px) !important;
        max-width: calc(100vw - 16px) !important;
        box-sizing: border-box !important;
    }
    
    .mobile-total-price {
        font-size: clamp(0.9rem, 3.5vw, 1rem) !important;
    }
    
    .mobile-add-btn {
        font-size: clamp(0.85rem, 3vw, 0.95rem) !important;
        padding: 10px 14px !important;
    }
}

/* 14. ACCESSIBILITY IMPROVEMENTS */
@media (max-width: 768px) {
    /* Focus indicators for touch devices */
    button:focus,
    input:focus,
    select:focus {
        outline: 2px solid #16697A !important;
        outline-offset: 2px !important;
    }
    
    /* Improve contrast for small text */
    .upload-hint,
    .drag-hint,
    .brand-quote {
        color: #333 !important;
        opacity: 0.8 !important;
    }
}

/* 15. HORIZONTAL SCROLL PREVENTION */
@media (max-width: 768px) {
    /* Ensure no element can cause horizontal scroll */
    .preview-section,
    .upload-section,
    .room-preview-section,
    .mobile-customization-section,
    .mobile-customization-cards,
    .mobile-card {
        max-width: 100% !important;
        overflow-x: hidden !important;
        word-wrap: break-word !important;
    }
    
    /* Fix potential overflow from images */
    img {
        max-width: 100% !important;
        height: auto !important;
    }
}

/* 16. ADDITIONAL MOBILE UTILITY CLASSES */
.mobile-hidden {
    display: none !important;
}

@media (max-width: 768px) {
    .desktop-only {
        display: none !important;
    }
    
    .mobile-only {
        display: block !important;
    }
    
    .mobile-flex {
        display: flex !important;
    }
}

@media (min-width: 769px) {
    .mobile-only {
        display: none !important;
    }
}